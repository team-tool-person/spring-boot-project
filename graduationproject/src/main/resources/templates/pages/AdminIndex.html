<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管路员界面</title>


    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- 页头部分 -->
        <div class="row clearfix">
            <div class="col-md-12 column">
                <!-- 页头栏目 -->
                <div class="row clearfix">
                    <div class="col-md-12 column">
                        <nav class="navbar navbar-default navbar-inverse navbar-fixed-top" role="navigation">
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle" data-toggle="collapse"
                                    data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle
                                        navigation</span><span class="icon-bar"></span><span
                                        class="icon-bar"></span><span class="icon-bar"></span></button> <a
                                    class="navbar-brand"
                                    href="http://localhost:8080/graduationproject/admin/index">管理员系统</a>
                            </div>

                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                <ul class="nav navbar-nav">
                                    <li class="active">
                                        <a href="#">教师信息管理</a>
                                    </li>
                                    <li>
                                        <a href="#">学会信息管理</a>
                                    </li>
                                </ul>
                                <form class="navbar-form navbar-left" role="search">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="msgsearch" />
                                    </div> <button type="submit" class="btn btn-default">信息搜索</button>
                                </form>
                                <ul class="nav navbar-nav navbar-right" style="padding-right: 10px;">
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于本系统<strong
                                                class="caret"></strong></a>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="#">系统文献</a>
                                            </li>
                                            <li>
                                                <a href="#">系统日志</a>
                                            </li>
                                            <li>
                                                <a href="#">健康检查</a>
                                            </li>
                                            <li class="divider">
                                            </li>
                                            <li>
                                                <a href="#">作者页面</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>

                        </nav>
                    </div>
                </div>
                <!-- 标题栏目 -->
                <div class="row clearfix" style="margin-top: 5%;">
                    <div class="col-md-12 column">
                        <div class="page-header">
                            <h1>
                                修正信息 <small>管理员系统</small>
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 内容部分 -->
        <div class="row clearfix">
            <div class="col-md-12 column">
                <div class="row clearfix">
                    <div class="col-md-2 column">
                        <h3 class="text-error">
                            信息修正管理
                        </h3>
                    </div>
                    <div class="col-md-6 column">

                    </div>
                    <div class="col-md-4 column">
                    </div>
                </div>
                <div class="row clearfix">
                    <div class="col-md-12 column">
                        <table class="table table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th>
                                        编号
                                    </th>
                                    <th>
                                        标题
                                    </th>
                                    <th>
                                        教师姓名
                                    </th>
                                    <th>
                                        学生姓名
                                    </th>
                                    <th>
                                        内容
                                    </th>
                                    <th>
                                        是否已经处理
                                    </th>
                                    <th>
                                        处理
                                    </th>
                                    <th>
                                        操作
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="tbody">
                                <!--
                                    已知给<tr>标签提供了三种不同的样式
                                    1. success 绿色
                                    2. warning 橘色
                                    3. info 蓝色

                                -->
                                <!-- 使用js填充表格信息 
                                    填充的信息包括
                                    id,title,teacherName,studentName,msg,solved
                                    ;:の
                                -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>

    // 向tbody内填充信息
    var tbody = $('#tbody');

    $(function () {

        getMsg();

    });

    function getMsg() {

        $.ajax({
            type: "GET",
            url: "getMsgs",
            dataType: "JSON",
            success: function (data) {
                console.log(data);
                // 将JSON数据进行处理,显示在页面上
                showData(data);
            },
            error: function (error) {
                console.error(error);
            }
        });
    }

    function showData(data) {
        // 将JSON 打印到tbody中
        function showData(data) {
            $.each(data, function (index, message) {

                // 新建一行
                var row = $('<tr></tr>')

                /**
                 * 对数据和这一行的样式进行处理
                 *
                 * 
                */

                var tds = '<td>' + message.id + '</td>' +
                    '<td>' + message.title + '</td>' +
                    '<td>' + message.teacherName + '</td>' +
                    '<td>' + message.studentName + '</td>' +
                    '<td>' + message.msg + '</td>' +
                    '<td>' + (message.solved == 0 ? '未处理' : '已处理') + '</td>' +
                    '<td><button class="btn btn-primary process-btn" id="solvedMsg">处理</button></td>' +
                    '<td><button class="btn btn-danger delete-btn" id="deleteMsg">删除</button></td>' +
                    '</tr>';

                // 对tr添加样式:
                // 如果没有对这个信息进行处理,则这个tr的样式应为为 warning
                if (message.solved == 0) {
                    row.addClass('warning');
                }

                // 将处理信息放置到tr中
                row.html(tds);

                // 将这一行添加到tbody中
                tbody.append(row);
            });
        }
    }

</script>

</html>