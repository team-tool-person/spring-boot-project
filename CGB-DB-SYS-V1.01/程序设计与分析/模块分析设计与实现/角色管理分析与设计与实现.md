# 1. 角色管理模块分析

## 1.1 业务设计说明

本模块主要实现的是企业内部角色(岗位)的管理,可以在添加角色时,**为角色分配资源访问权限**,最后将角色再分配给用户

![2023-12-2815:16:20--image10.png](https://gitee.com/teamsea/tuchuang/raw/master/tuchuang/2023-12-2815:16:20--image10.png)

+ 将菜单的管理权限赋予角色，让这个角色可以对数据进行访问和修改

+ 角色和菜单之间的关系是多对多，相同的角色可以管理不同的菜单，相同的菜单也要被不同的角色进行管理

+ 角色和用户之间的关系是多对多，相同的用户和可以不同的角色，相同的角色也是不同的用户

+ 在管理时，我们不仅仅要管理菜单，角色，用户表，也要处理菜单，角色，用户之间的关系表

+ 部门与用户是一对多的关系，用户与日志是一对多的关系

这里要处理7张表，包括部门，用户，日志，角色，菜单，用户与角色的关系表，菜单与角色的关系表

![2023-12-2815:30:03--image13.png](https://gitee.com/teamsea/tuchuang/raw/master/tuchuang/2023-12-2815:30:03--image13.png)

## 1.2 数据库表设计

### 1.2.1 数据表设计

角色数据表:

|字段名          |类型      |约束       |说明|
| ------------  | -------- | -------   | ------------------------------|
|id             |int       |primary    |角色主键                        |
|name           |varchar   |           |角色名称                        |
|note           |varchar   |           |备注                            |
|createdTime    |datetime  |           |创建时间                        |
| modifiedTime  | datetime |           | 修改时间                       |
| createdUser   | varchar  |           | 创建用户                       |
| modifiedUser  | varchar  |           | 修改用户                       |

### 1.2.2 数据关系表设计

菜单与角色数据关系表:

|字段名          |类型       |约束      |说明|
| ------------  | --------  | -------  | ------------------------------|
|id             |int        |primary   |主键                            |
|role_id        |int        |          |角色id                         |
|menu_id        |int        |          |菜单id                         |

用户与角色数据关系表:

|字段名          |类型       |约束      |说明|
| ------------  | --------  | -------  | ------------------------------|
|id             |int        |primary   |主键                            |
|role_id        |int        |          |角色id                         |
|user_id        |int        |          |用户id                         |

# 2. 原型说明

基于用户需求，通过静态页面为用户呈现角色模块的基本需求。

当在主页点击角色管理时，呈现角色列表页面、

![2023-12-2816:14:54--image15.png](https://gitee.com/teamsea/tuchuang/raw/master/tuchuang/2023-12-2816:14:54--image15.png)

在列表页面点击添加按钮时，呈现角色编辑页面

![2023-12-2816:15:11--image17.png](https://gitee.com/teamsea/tuchuang/raw/master/tuchuang/2023-12-2816:15:11--image17.png)

在列表页面点击编辑按钮时，呈现角色编辑页面

![2023-12-2816:15:27--image4.png](https://gitee.com/teamsea/tuchuang/raw/master/tuchuang/2023-12-2816:15:27--image4.png)

# 3. AIP设计

角色管理业务后台API分层架构及调用关系如图

![2023-12-2816:17:21--image5.png](https://gitee.com/teamsea/tuchuang/raw/master/tuchuang/2023-12-2816:17:21--image5.png)

