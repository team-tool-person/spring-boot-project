<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.cy.pj.sys.dao.MenusDao">



    <!-- 
        获取菜单类型
        查询到的菜单信息包括菜单所有信息还有父菜单名称
     -->
    <select id="findObjects" resultType="Map">

        select c.*,p.name parentName from sys_menus c left join sys_menus p on c.parentId=p.id
        
    </select>

    <!-- 
        获取子菜单数
     -->

    <select id="getChildCount">

       select count(*) from sys_menus where parentId = #{id};	 

    </select>



    <!-- 
        删除指定菜单
     -->
    <delete id="deleteObject" parameterType="int">
        
        delete from sys_menus 
        <choose>
            <when test="menuId != null and menuId > 0">
                where id = #{id}
            </when>
            <otherwise>
                where 1 = 2
            </otherwise>
        </choose>

    </delete>

    <!-- findZtreeMenuNodes --> 

    <select id="findZtreeMenuNodes" resultType="com.cy.pj.common.vo.Node">
        select id,name,parentId from sys_menus
    </select>
    
    </mapper>